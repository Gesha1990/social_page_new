{"version":3,"sources":["components/Users/User/User.module.css","components/Users/Users.module.css","components/common/Paginator.module.css","components/Users/User/User.jsx","components/common/Paginator.jsx","components/Users/Users.jsx","../node_modules/reselect/es/index.js","redux/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["module","exports","user","ava","userAva","name","status","location","button","main","selectedPage","page","paginator","User","props","react_default","a","createElement","className","style","key","id","react_router_dom","to","src","small","userPhoto","alt","followed","onClick","unfollowThunkCreator","disabled","followingInProgress","some","followUserThunkCreator","namne","country","city","Paginator","pagesCount","Math","ceil","totalUsersCount","pageSize","pages","i","push","portion","portionSize","_useState","useState","_useState2","Object","slicedToArray","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionNumber","filter","p","map","currentPage","onPageChanged","Users","common_Paginator","users","u","Users_User_User","photos","defaultEqualityCheck","b","createSelector","memoize","_len","arguments","length","memoizeOptions","Array","_key","_len2","funcs","_key2","recomputations","resultFunc","pop","dependencies","isArray","every","dep","dependencyTypes","join","Error","getDependencies","memoizedResultFunc","apply","undefined","concat","selector","params","resetRecomputations","createSelectorCreator","func","equalityCheck","lastArgs","lastResult","prev","next","areArgumentsShallowlyEqual","getUsers","state","usersPage","getPageSize","getTotalUserCount","getCurrentPage","getIsFetching","isFetching","getFollowingInProgress","UsersContainer","_this","getUsersThunkCreator","this","Fragment","Loader","components_Users_Users","setIsFollowingProgress","React","Component","compose","connect","withAuthRedirect"],"mappings":"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","file":"static/js/3.f0b51a6f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__1I6UE\",\"ava\":\"User_ava__3WMNz\",\"userAva\":\"User_userAva__3WZVM\",\"name\":\"User_name__31Hgo\",\"status\":\"User_status__3SCjh\",\"location\":\"User_location__2ZZJm\",\"button\":\"User_button__loLmy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Users_main__204kg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedPage\":\"Paginator_selectedPage__2eZTF\",\"page\":\"Paginator_page__j-V1l\",\"paginator\":\"Paginator_paginator__1uX1a\"};","import React from 'react';\nimport style from './User.module.css'\nimport userPhoto from '../../../assets/img/avaUsers.jpg'\nimport {NavLink} from \"react-router-dom\";\n\n\nconst User = (props) => {\n\n\n\n  let unFollow = () => {\n    props.unfollowThunkCreator(props.id)\n  };\n\n  let follow = () => {\n    props.followUserThunkCreator(props.id)\n  };\n\n  return (\n    <div className={style.user} key={props.id}>\n      <div className={style.ava}><NavLink to={'/profile/' + props.id} ><img src={props.ava.small != null ? props.ava.small : userPhoto} alt=\"ava\" className={style.userAva}/></NavLink></div>\n      {props.followed? <button className={style.button} onClick={unFollow} disabled={props.followingInProgress.some(id => id===props.id)}>Unfollow</button> :\n        <button className={style.button} onClick={follow} disabled={props.followingInProgress.some(id => id===props.id)}>Follow</button>}\n      <div className={style.name}>{props.namne}</div>\n      <div className={style.status}>{props.status}</div>\n      <div className={style.location}>\n        <p>{props.country}</p>\n        <p>{props.city}</p>\n      </div>\n    </div>\n\n  )\n\n}\nexport default User;","import React, {useState} from 'react';\nimport style from './Paginator.module.css'\n\n\nconst Paginator = (props) => {\n\n  let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize);\n  let pages = [];\n  for (let i = 1; i < pagesCount; i++) {\n    pages.push(i);\n  }\n  let portion = Math.ceil(pagesCount / props.portionSize);\n\n  let [portionNumber, setPortionNumber] = useState(1);\n\n  let leftPortionPageNumber = (portionNumber -1 ) * portion +1;\n\n  let rightPortionNumber = portionNumber * portion;\n\n\n\n  return (\n    <div className={style.paginator}>\n      {portionNumber > 1 &&\n      <button onClick={()=> {setPortionNumber(portionNumber - 1)}}>Previous</button>}\n      {pages\n        .filter(p => p >= leftPortionPageNumber && p <= rightPortionNumber)\n        .map(p => {\n        return <span className={props.currentPage === p?  style.selectedPage : style.page}  key={p} onClick={() => {\n          props.onPageChanged(p)\n        }}> {p}</span>\n      })}\n      {portion > portionNumber &&\n      <button onClick={()=> {setPortionNumber(portionNumber + 1)}}>Next</button>}\n    </div>\n  )\n}\nexport default Paginator;","import React from 'react';\nimport User from \"./User/User\";\nimport style from './Users.module.css';\nimport Paginator from \"../common/Paginator\";\n\nlet Users = (props) => {\n\n  let usersItems = () => {\n    return props.users.map(u => <User name={u.name} ava={u.photos} status={u.status}\n                                      country={'u.location.country'}\n                                      city={'u.location.city'} id={u.id} followed={u.followed}\n                                      unfollowThunkCreator={props.unfollowThunkCreator}\n                                      followUserThunkCreator={props.followUserThunkCreator}\n                                      followingInProgress={props.followingInProgress}\n                                      key={u.id}/>)\n  }\n\n  return (\n    <main className={style.main}>\n\n      <Paginator totalUsersCount={props.totalUsersCount}\n                 pageSize={props.pageSize}\n                 onPageChanged={props.onPageChanged}\n                 currentPage={props.currentPage}\n                 portionSize={props.portionSize}/>\n      {usersItems()}\n    </main>\n\n  )\n}\n\nexport default Users;","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n  var length = prev.length;\n\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n  var lastArgs = null;\n  var lastResult = null; // we reference arguments instead of spreading them for performance reasons\n\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n\n      return memoizedResultFunc.apply(null, params);\n    });\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n\n    selector.recomputations = function () {\n      return recomputations;\n    };\n\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n\n    return selector;\n  };\n}\nexport var createSelector = createSelectorCreator(defaultMemoize);\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import {createSelector} from \"reselect\";\n\nconst getUsersSlector = (state) => {\n  return state.usersPage.users\n};\n export const  getUsers = createSelector(getUsersSlector,\n   (users) => {\n   return users.filter(u=> true)\n });\nexport const getPageSize = (state) => {\n  return state.usersPage.pageSize\n};\nexport const getTotalUserCount = (state) => {\n  return state.usersPage.totalUsersCount\n};\nexport const getCurrentPage = (state) => {\n  return state.usersPage.currentPage\n}\nexport const getIsFetching = (state) => {\n  return state.usersPage.isFetching\n}\nexport const getFollowingInProgress= (state) => {\n  return state.usersPage.followingInProgress\n}\n\n","import React from 'react';\nimport Users from \"./Users\";\nimport {connect} from 'react-redux'\nimport Loader from \"../common/Loader\";\nimport {\n  followUserThunkCreator, getUsersThunkCreator,\n  unfollowThunkCreator\n} from \"../../redux/UsersReducer\";\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\nimport {compose} from \"redux\";\nimport {\n  getCurrentPage, getFollowingInProgress, getIsFetching, getPageSize, getTotalUserCount, getUsers\n} from \"../../redux/users-selectors\";\n\n\nclass UsersContainer extends React.Component {\n\n  componentDidMount() {\n    this.props.getUsersThunkCreator(this.props.currentPage, this.props.pageSize)\n  }\n\n  onPageChanged = (page) => {\n    this.props.getUsersThunkCreator(page, this.props.pageSize)\n  };\n\n\n  render() {\n    return <>\n      {this.props.isFetching ? <Loader/> : null}\n      <Users totalUsersCount={this.props.totalUsersCount}\n             pageSize={this.props.pageSize} users={this.props.users}\n             currentPage={this.props.currentPage} unfollowThunkCreator={this.props.unfollowThunkCreator}\n             followUserThunkCreator={this.props.followUserThunkCreator}\n             onPageChanged={this.onPageChanged} followingInProgress={this.props.followingInProgress}\n             setIsFollowingProgress={this.props.setIsFollowingProgress} portionSize={this.props.portionSize}\n      />\n    </>\n  }\n\n}\n\n\n\nlet mapStateToProps = (state) => {\n  return {\n    users: getUsers(state),\n    pageSize: getPageSize(state),\n    totalUsersCount: getTotalUserCount(state),\n    currentPage: getCurrentPage(state),\n    isFetching: getIsFetching(state),\n    followingInProgress: getFollowingInProgress(state),\n    portionSize: state.usersPage.portionSize\n  }\n};\n\nexport default compose(\n  connect(mapStateToProps, {\n    getUsersThunkCreator,\n    followUserThunkCreator,\n    unfollowThunkCreator\n  }),\n  withAuthRedirect\n)(UsersContainer);\n\n"],"sourceRoot":""}